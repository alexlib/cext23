[![Build Status](https://travis-ci.org/jiffyclub/cext23.svg?branch=master)](https://travis-ci.org/jiffyclub/cext23)

# C Extensions for Python 2 and 3

- [Introduction](#introduction)
- [Commonalities](#commonalities)
- [CFFI](#cffi)
- [Cython](#cython)
- [ctypes](#ctypes)

## Introduction

Writing pure-Python code that runs unmodified on Python 2 & 3 is doable
with the Python standard library [`__future__` module][future] and
packages like [six][] and [python-future][].
Writing C extensions can be another matter because Python's C-API
[changed substantially][cporting] from Python 2 to 3.
Working with the Python C-API can be a lot of work even when you aren't
trying to support two versions of Python so it's no surprise that options
exist to bypass writing the Python-C interface in straight C.
As a bonus these can also help you communicate with compiled C libraries
using the same code in both Python 2 and 3.
(And [here][snarky] are even more reasons to avoid the Python C-API.)
Below I'll be describing how to wrap C code using
[CFFI][], [Cython][], and [ctypes][].

*Note: I'm writing this as someone who has existing C code that I need to
work with. If you don't already have C and are only looking for performance
improvements then you have [other options][perf-alts] you should explore
before deciding to write C.*

## Commonalities

In all of the examples discussed the C code being wrapped is exactly
the same and it won't reference Python at all.
All of the Python to C interface layer will be done in Python or
generated by one of the tools discussed below.
The C source used in this example repo lives in the [src/](./src/) directory.

## CFFI

From the [CFFI homepage][CFFI]:

> C Foreign Function Interface for Python.
> The goal is to provide a convenient and reliable way to call compiled
> C code from Python using interface declarations written in C.

## Cython

## ctypes

[future]: https://docs.python.org/3/library/__future__.html
[six]: https://pythonhosted.org/six/
[python-future]: http://python-future.org/overview.html
[cporting]: https://docs.python.org/3/howto/cporting.html
[snarky]: http://www.snarky.ca/try-to-not-use-the-c-api-directly
[CFFI]: http://cffi.readthedocs.org/
[Cython]: http://docs.cython.org/
[ctypes]: https://docs.python.org/3/library/ctypes.html
[perf-alts]: https://packaging.python.org/en/latest/extensions/#alternatives-to-handcoded-accelerator-modules
